-module('fn_parse_json_SUITE').

-include_lib("common_test/include/ct.hrl").

-export([
    all/0,
    groups/0,
    suite/0
]).

-export([
    init_per_suite/1,
    init_per_group/2,
    end_per_group/2,
    end_per_suite/1
]).

-export(['fn-parse-json-001'/1]).
-export(['fn-parse-json-002'/1]).
-export(['fn-parse-json-003'/1]).
-export(['fn-parse-json-004'/1]).
-export(['fn-parse-json-005'/1]).
-export(['fn-parse-json-006'/1]).
-export(['fn-parse-json-007'/1]).
-export(['fn-parse-json-008'/1]).
-export(['fn-parse-json-009'/1]).
-export(['fn-parse-json-010'/1]).
-export(['fn-parse-json-011'/1]).
-export(['fn-parse-json-012'/1]).
-export(['fn-parse-json-013'/1]).
-export(['fn-parse-json-014'/1]).
-export(['fn-parse-json-015'/1]).
-export(['fn-parse-json-016'/1]).
-export(['fn-parse-json-017'/1]).
-export(['fn-parse-json-018'/1]).
-export(['fn-parse-json-019'/1]).
-export(['fn-parse-json-020'/1]).
-export(['fn-parse-json-021'/1]).
-export(['fn-parse-json-022'/1]).
-export(['fn-parse-json-023'/1]).
-export(['fn-parse-json-024'/1]).
-export(['fn-parse-json-025'/1]).
-export(['fn-parse-json-026'/1]).
-export(['fn-parse-json-027'/1]).
-export(['fn-parse-json-028'/1]).
-export(['fn-parse-json-029'/1]).
-export(['fn-parse-json-030'/1]).
-export(['fn-parse-json-031'/1]).
-export(['fn-parse-json-032'/1]).
-export(['fn-parse-json-033'/1]).
-export(['fn-parse-json-034'/1]).
-export(['fn-parse-json-035'/1]).
-export(['fn-parse-json-036'/1]).
-export(['fn-parse-json-037'/1]).
-export(['fn-parse-json-038'/1]).
-export(['fn-parse-json-039'/1]).
-export(['fn-parse-json-040'/1]).
-export(['fn-parse-json-041'/1]).
-export(['fn-parse-json-042'/1]).
-export(['fn-parse-json-050'/1]).
-export(['fn-parse-json-051'/1]).
-export(['fn-parse-json-052'/1]).
-export(['fn-parse-json-053'/1]).
-export(['fn-parse-json-054'/1]).
-export(['fn-parse-json-055'/1]).
-export(['fn-parse-json-056'/1]).
-export(['fn-parse-json-057'/1]).
-export(['fn-parse-json-058'/1]).
-export(['fn-parse-json-059'/1]).
-export(['fn-parse-json-060'/1]).
-export(['fn-parse-json-061'/1]).
-export(['fn-parse-json-062'/1]).
-export(['fn-parse-json-063'/1]).
-export(['fn-parse-json-064'/1]).
-export(['fn-parse-json-065'/1]).
-export(['fn-parse-json-066'/1]).
-export(['fn-parse-json-101'/1]).
-export(['fn-parse-json-102'/1]).
-export(['fn-parse-json-103'/1]).
-export(['fn-parse-json-104'/1]).
-export(['fn-parse-json-105'/1]).
-export(['fn-parse-json-106'/1]).
-export(['fn-parse-json-107'/1]).
-export(['fn-parse-json-108'/1]).
-export(['fn-parse-json-109'/1]).
-export(['fn-parse-json-110'/1]).
-export(['fn-parse-json-111'/1]).
-export(['fn-parse-json-112'/1]).
-export(['fn-parse-json-113'/1]).
-export(['fn-parse-json-114'/1]).
-export(['fn-parse-json-115'/1]).
-export(['fn-parse-json-801'/1]).
-export(['fn-parse-json-802'/1]).
-export(['fn-parse-json-804'/1]).
-export(['fn-parse-json-806'/1]).
-export(['fn-parse-json-809'/1]).
-export(['fn-parse-json-810'/1]).
-export(['fn-parse-json-811'/1]).
-export(['fn-parse-json-814'/1]).
-export(['fn-parse-json-815'/1]).
-export(['fn-parse-json-816'/1]).
-export(['fn-parse-json-817'/1]).
-export(['fn-parse-json-819'/1]).
-export(['fn-parse-json-820'/1]).
-export(['fn-parse-json-821'/1]).
-export(['fn-parse-json-822'/1]).
-export(['fn-parse-json-823'/1]).
-export(['fn-parse-json-824'/1]).
-export(['fn-parse-json-830'/1]).
-export(['fn-parse-json-831'/1]).
-export(['fn-parse-json-832'/1]).
-export(['fn-parse-json-833'/1]).
-export(['fn-parse-json-834'/1]).
-export(['fn-parse-json-835'/1]).
-export(['fn-parse-json-839'/1]).
-export(['fn-parse-json-840'/1]).
-export(['fn-parse-json-901'/1]).
-export(['fn-parse-json-902'/1]).
-export(['fn-parse-json-903'/1]).
-export(['fn-parse-json-904'/1]).
-export(['fn-parse-json-905'/1]).
-export(['fn-parse-json-906'/1]).
-export(['fn-parse-json-907'/1]).
-export(['fn-parse-json-908'/1]).
-export(['fn-parse-json-909'/1]).
-export(['fn-parse-json-910'/1]).
-export(['fn-parse-json-911'/1]).
-export(['fn-parse-json-912'/1]).
-export(['fn-parse-json-913'/1]).
-export(['fn-parse-json-914'/1]).
-export(['fn-parse-json-915'/1]).
-export(['fn-parse-json-916'/1]).
-export(['fn-parse-json-917'/1]).
-export(['fn-parse-json-918'/1]).
-export(['fn-parse-json-919'/1]).
-export(['fn-parse-json-920'/1]).
-export(['fn-parse-json-921'/1]).
-export(['fn-parse-json-922'/1]).
-export(['fn-parse-json-923'/1]).
-export(['fn-parse-json-924'/1]).
-export(['fn-parse-json-925'/1]).
-export(['fn-parse-json-926'/1]).
-export(['fn-parse-json-927'/1]).
-export(['fn-parse-json-928'/1]).
-export(['fn-parse-json-929'/1]).
-export(['fn-parse-json-930'/1]).
-export(['fn-parse-json-931'/1]).
-export(['fn-parse-json-932'/1]).
-export(['fn-parse-json-933'/1]).
-export(['fn-parse-json-934'/1]).
-export(['fn-parse-json-935'/1]).
-export(['fn-parse-json-936'/1]).
-export(['fn-parse-json-937'/1]).
-export(['fn-parse-json-938'/1]).
-export(['fn-parse-json-939'/1]).
-export(['fn-parse-json-940'/1]).
-export(['fn-parse-json-941'/1]).
-export(['fn-parse-json-942'/1]).
-export(['fn-parse-json-943'/1]).
-export(['fn-parse-json-944'/1]).
-export(['fn-parse-json-945'/1]).
-export(['fn-parse-json-946'/1]).
-export(['fn-parse-json-947'/1]).
-export(['fn-parse-json-948'/1]).
-export(['fn-parse-json-949'/1]).
-export(['fn-parse-json-950'/1]).
-export(['fn-parse-json-951'/1]).
-export(['fn-parse-json-952'/1]).
-export(['fn-parse-json-953'/1]).
-export(['fn-parse-json-954'/1]).
-export(['fn-parse-json-955'/1]).

suite() -> [{timetrap, {seconds, 180}}].

init_per_group(_, Config) -> Config.

end_per_group(_, _Config) ->
    xqerl_code_server:unload(all).

end_per_suite(_Config) ->
    ct:timetrap({seconds, 60}),
    xqerl_code_server:unload(all).

init_per_suite(Config) ->
    {ok, _} = application:ensure_all_started(xqerl),
    DD = filename:dirname(filename:dirname(filename:dirname(?config(data_dir, Config)))),
    TD = filename:join(DD, "QT3-test-suite"),
    __BaseDir = filename:join(TD, "fn"),
    [{base_dir, __BaseDir} | Config].

all() ->
    [
        {group, group_0},
        {group, group_1},
        {group, group_2},
        {group, group_3},
        {group, group_4},
        {group, group_5},
        {group, group_6}
    ].

groups() ->
    [
        {group_0, [parallel], [
            'fn-parse-json-001',
            'fn-parse-json-002',
            'fn-parse-json-003',
            'fn-parse-json-004',
            'fn-parse-json-005',
            'fn-parse-json-006',
            'fn-parse-json-007',
            'fn-parse-json-008',
            'fn-parse-json-009',
            'fn-parse-json-010',
            'fn-parse-json-011',
            'fn-parse-json-012',
            'fn-parse-json-013',
            'fn-parse-json-014',
            'fn-parse-json-015',
            'fn-parse-json-016',
            'fn-parse-json-017',
            'fn-parse-json-018',
            'fn-parse-json-019',
            'fn-parse-json-020',
            'fn-parse-json-021',
            'fn-parse-json-022',
            'fn-parse-json-023'
        ]},
        {group_1, [parallel], [
            'fn-parse-json-024',
            'fn-parse-json-025',
            'fn-parse-json-026',
            'fn-parse-json-027',
            'fn-parse-json-028',
            'fn-parse-json-029',
            'fn-parse-json-030',
            'fn-parse-json-031',
            'fn-parse-json-032',
            'fn-parse-json-033',
            'fn-parse-json-034',
            'fn-parse-json-035',
            'fn-parse-json-036',
            'fn-parse-json-037',
            'fn-parse-json-038',
            'fn-parse-json-039',
            'fn-parse-json-040',
            'fn-parse-json-041',
            'fn-parse-json-042',
            'fn-parse-json-050',
            'fn-parse-json-051',
            'fn-parse-json-052',
            'fn-parse-json-053',
            'fn-parse-json-054'
        ]},
        {group_2, [parallel], [
            'fn-parse-json-055',
            'fn-parse-json-056',
            'fn-parse-json-057',
            'fn-parse-json-058',
            'fn-parse-json-059',
            'fn-parse-json-060',
            'fn-parse-json-061',
            'fn-parse-json-062',
            'fn-parse-json-063',
            'fn-parse-json-064',
            'fn-parse-json-065',
            'fn-parse-json-066',
            'fn-parse-json-101',
            'fn-parse-json-102',
            'fn-parse-json-103',
            'fn-parse-json-104',
            'fn-parse-json-105',
            'fn-parse-json-106',
            'fn-parse-json-107',
            'fn-parse-json-108',
            'fn-parse-json-109',
            'fn-parse-json-110',
            'fn-parse-json-111',
            'fn-parse-json-112'
        ]},
        {group_3, [parallel], [
            'fn-parse-json-113',
            'fn-parse-json-114',
            'fn-parse-json-115',
            'fn-parse-json-801',
            'fn-parse-json-802',
            'fn-parse-json-804',
            'fn-parse-json-806',
            'fn-parse-json-809',
            'fn-parse-json-810',
            'fn-parse-json-811',
            'fn-parse-json-814',
            'fn-parse-json-815',
            'fn-parse-json-816',
            'fn-parse-json-817',
            'fn-parse-json-819',
            'fn-parse-json-820',
            'fn-parse-json-821',
            'fn-parse-json-822',
            'fn-parse-json-823',
            'fn-parse-json-824',
            'fn-parse-json-830',
            'fn-parse-json-831',
            'fn-parse-json-832',
            'fn-parse-json-833'
        ]},
        {group_4, [parallel], [
            'fn-parse-json-834',
            'fn-parse-json-835',
            'fn-parse-json-839',
            'fn-parse-json-840',
            'fn-parse-json-901',
            'fn-parse-json-902',
            'fn-parse-json-903',
            'fn-parse-json-904',
            'fn-parse-json-905',
            'fn-parse-json-906',
            'fn-parse-json-907',
            'fn-parse-json-908',
            'fn-parse-json-909',
            'fn-parse-json-910',
            'fn-parse-json-911',
            'fn-parse-json-912',
            'fn-parse-json-913',
            'fn-parse-json-914',
            'fn-parse-json-915',
            'fn-parse-json-916',
            'fn-parse-json-917',
            'fn-parse-json-918',
            'fn-parse-json-919',
            'fn-parse-json-920'
        ]},
        {group_5, [parallel], [
            'fn-parse-json-921',
            'fn-parse-json-922',
            'fn-parse-json-923',
            'fn-parse-json-924',
            'fn-parse-json-925',
            'fn-parse-json-926',
            'fn-parse-json-927',
            'fn-parse-json-928',
            'fn-parse-json-929',
            'fn-parse-json-930',
            'fn-parse-json-931',
            'fn-parse-json-932',
            'fn-parse-json-933',
            'fn-parse-json-934',
            'fn-parse-json-935',
            'fn-parse-json-936',
            'fn-parse-json-937',
            'fn-parse-json-938',
            'fn-parse-json-939',
            'fn-parse-json-940',
            'fn-parse-json-941',
            'fn-parse-json-942',
            'fn-parse-json-943',
            'fn-parse-json-944'
        ]},
        {group_6, [parallel], [
            'fn-parse-json-945',
            'fn-parse-json-946',
            'fn-parse-json-947',
            'fn-parse-json-948',
            'fn-parse-json-949',
            'fn-parse-json-950',
            'fn-parse-json-951',
            'fn-parse-json-952',
            'fn-parse-json-953',
            'fn-parse-json-954',
            'fn-parse-json-955'
        ]}
    ].

environment('map', __BaseDir) ->
    [
        {'decimal-formats', []},
        {sources, []},
        {collections, []},
        {'static-base-uri', []},
        {params, []},
        {vars, []},
        {namespaces, [{"http://www.w3.org/2005/xpath-functions/map", "map"}]},
        {schemas, []},
        {resources, []},
        {modules, []}
    ].

'fn-parse-json-001'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"{}\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-001.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-002'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":12}', map{'liberal':false()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-002.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":12e0}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-003'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":12e0}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-003.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":12e0}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-004'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":-1.2e0}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-004.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":-1.2e0}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-005'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":true}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-005.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":true()}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-006'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":false}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-006.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":false()}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-007'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":null}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-007.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":()}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-008'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"abc\":true,\"xyz\":false}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-008.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":true(),\"xyz\":false()}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-009'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(' { \"abc\" : true , \"xyz\" : false } ')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-009.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":true(),\"xyz\":false()}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-010'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('    {   \"abc\"   :   true    ,\n"
        "            \"xyz\"   :   false   \n"
        "            }   ')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-010.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"abc\":true(),\"xyz\":false()}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-011'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[]\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-011.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 0") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-012'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[12345]\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-012.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 eq 12345") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-013'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"abcd\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-013.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 eq \"abcd\"") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-014'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[true]\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-014.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 eq true()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-015'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[false]\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-015.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 eq false()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-016'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[null]\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-016.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "empty($result?1)") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-017'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[1,2,3, \"abc\", \"def\", true, false, null]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-017.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 8") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?2 eq 2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?3 eq 3") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?4 eq \"abc\"") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?5 eq \"def\"") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?6 eq true()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?7 eq false()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?8 => empty()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-018'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('\n"
        "        [   1,     2,  3, \n"
        "        \"abc\",  \"def\",   true, \n"
        "        false,  null ]\n"
        "        ')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-018.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 8") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?2 eq 2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?3 eq 3") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?4 eq \"abc\"") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?5 eq \"def\"") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?6 eq true()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?7 eq false()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?8 => empty()") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-019'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[[[],[]]]\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-019.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(array(array(*)))") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) eq 1") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result?1) eq 2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result?1?2) eq 0") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-020'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[1, 2, [], [1], [1,2], [1,2,3]]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-020.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "array(*)") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_count(Res, "1") of
                        true -> {comment, "Count correct"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "array:size($result) = 6") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?6?3 = 3") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-021'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[{\"x\":12,\"y\":5}, {\"x\":13,\"y\":6}]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-021.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "array:size($result) = 2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?2?y = 6") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-022'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"x\":[12,3], \"y\":[14,9]}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-022.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "map:size($result) = 2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?y?2 = 9") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-023'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[0.123]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-023.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = 0.123e0") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:double") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-024'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[-0.123]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-024.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = -0.123e0") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:double") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-025'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[-0.123e2]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-025.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = -0.123e2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:double") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-026'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[-0.123e+2]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-026.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = -0.123e+2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:double") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-027'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[-0.123e-2]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-027.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = -0.123e-2") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:double") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-028'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\\\\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-028.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = \"\\\"") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-029'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\\"\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-029.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = '\"'") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-030'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\r\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-030.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = codepoints-to-string(13)") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-031'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\n\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-031.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = codepoints-to-string(10)") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-032'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\/\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-032.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = '/'") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-033'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"aa\\u0030aa\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-033.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = 'aa0aa'") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-034'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\uD834\\udD1E\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-034.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert(Res, "$result?1 = codepoints-to-string(119070)") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert(Res, "$result?1 instance of xs:string") of
                        true -> {comment, "Correct results"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-035'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\r\"]', map{'escape':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-035.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert(Res, "$result?1 = '\\r'") of
            true -> {comment, "Correct results"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-036'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\r\"]', map{'escape':false()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-036.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert(Res, "$result?1 = codepoints-to-string(13)") of
            true -> {comment, "Correct results"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-037'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\u0000\"]', map{'escape':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-037.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert(Res, "$result?1 = '\\u0000'") of
            true -> {comment, "Correct results"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-038'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('true')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-038.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_true(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-039'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('false')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-039.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_false(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-040'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('null')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-040.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_empty(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-041'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('93.7')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-041.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_eq(Res, "93.7e0") of
                        true -> {comment, "Equal"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_type(Res, "xs:double") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-042'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"abcd\\n\"', map{'escape':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-042.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:all(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_eq(Res, "'abcd\\n'") of
                        true -> {comment, "Equal"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_type(Res, "xs:string") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "all-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-050'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"a\":3}', map{'duplicates':'use-first'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-050.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"a\":1, \"b\":2}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-051'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"a\":3}', map{'duplicates':'use-last'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-051.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"a\":3, \"b\":2}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-052'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"a\":3}', map{})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-052.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"a\":1, \"b\":2}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-053'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"\\uFFFF\"')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-053.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "codepoints-to-string(65533)") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-054'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"\\uDEAD\"')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-054.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "codepoints-to-string(65533)") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-055'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"\\b\"')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-055.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "codepoints-to-string(65533)") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-056'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\uFFFF\":\"\"}') => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-056.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "codepoints-to-string(65533)") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-057'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\uDEAD\":\"\"}') => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-057.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "codepoints-to-string(65533)") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-058'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\b\":\"\"}') => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-058.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "codepoints-to-string(65533)") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-059'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"\\uFFFF\"', map{'fallback':lower-case#1})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-059.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "\"\\uffff\"") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-060'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"\\uDEAD\"', map{'fallback':lower-case#1})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-060.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "\"\\udead\"") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-061'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"\\b\"', map{'fallback':lower-case#1})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-061.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_eq(Res, "\"\\b\"") of
                        true -> {comment, "Equal"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_eq(Res, "\"\\u0008\"") of
                        true -> {comment, "Equal"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-062'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\uFFFF\":\"\"}', map{'fallback':lower-case#1}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-062.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "\"\\uffff\"") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-063'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\uDEAD\":\"\"}', map{'fallback':lower-case#1}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-063.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "\"\\udead\"") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-064'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\b\":\"\"}', map{'fallback':lower-case#1}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-064.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_eq(Res, "\"\\b\"") of
                        true -> {comment, "Equal"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_eq(Res, "\"\\u0008\"") of
                        true -> {comment, "Equal"};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-065'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2}', map{'validate':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-065.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"a\":1, \"b\":2}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-066'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "\n"
        "        parse-json('\n"
        "          {\n"
        "             \"x\" : [1,2,[]],\n"
        "             \"y\" : { \"a\" : {} },\n"
        "             \"x\" : [3,4,[]],\n"
        "             \"y\" : { \"c\" : [], \"c\" : 1, \"c\" : {} }\n"
        "          }\n"
        "        ',\n"
        "        map{'duplicates':'use-last'})\n"
        "      ",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-066.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"x\":[3,4,[]], \"y\":map{\"c\" : map{}}}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-101'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(unparsed-text('parse-json/data001.json'))",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-101.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_count(Res, "1") of
            true -> {comment, "Count correct"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-102'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(unparsed-text('parse-json/data002.json'))",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-102.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_count(Res, "1") of
            true -> {comment, "Count correct"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-103'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(unparsed-text('parse-json/data003.json'))",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-103.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_count(Res, "1") of
            true -> {comment, "Count correct"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-104'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(unparsed-text('parse-json/data004.json'))",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-104.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_count(Res, "1") of
            true -> {comment, "Count correct"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-105'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(unparsed-text('parse-json/data005.json'))",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-105.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_count(Res, "1") of
            true -> {comment, "Count correct"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-106'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"x\":\"\\\\\", \"y\":\"\\u0025\"}', map{'escape':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-106.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"x\":\"\\\\\",\"y\":\"%\"}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-107'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\\\\":\"x\", \"\\u0025\":\"y\"}', map{'escape':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-107.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"\\\\\":\"x\", \"%\":\"y\"}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-108'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('{\"%\":\"x\", \"\\u0025\":\"y\"}', map{'escape':true(), 'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-108.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0003") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0003 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-109'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"/\":\"x\", \"\\/\":\"y\"}', map{'escape':true(), 'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-109.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0003") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0003 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-110'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('{\"\\u000a\\u0025\":\"x\", \"\\n%\":\"y\"}', map{'escape':true(), 'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-110.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0003") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0003 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-111'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('{\"%\\u0010%\":\"x\", \"%\\n%\":\"y\"}', map{'escape':true(), 'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-111.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"%\\u0010%\":\"x\", \"%\\n%\":\"y\"}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-112'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(())",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-112.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_empty(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-113'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json((),  map{'escape':true(), 'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-113.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_empty(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-114'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"[]\"[current-date() lt xs:date('1900-01-01')])",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-114.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_empty(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-115'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json(\"[]\"[current-date() lt xs:date('1900-01-01')],  map{'escape':true(), 'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-115.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_empty(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-801'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[-0.123e-2,]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-801.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-802'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[FALSE]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-802.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-804'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[(5)]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-804.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-806'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[{x:23}]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-806.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-809'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[1,2,3,]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-809.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-810'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":=13}', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-810.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-811'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":13,,\"b\":15}', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-811.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-814'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":{\"b\":12}}}', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-814.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-815'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-815.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-816'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\1\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-816.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-817'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\u2\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-817.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-819'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\b\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-819.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-820'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\x20\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-820.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-821'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\s\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-821.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-822'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\uD834\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-822.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-823'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\udD1E\"]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-823.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-824'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\u0000\"]', map{'escape':false(), 'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-824.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-830'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[.3]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-830.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-831'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[01]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-831.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-832'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[00.00]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-832.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-833'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[+23]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-833.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-834'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[1.234f0]', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-834.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-835'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"['wrong']\", map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-835.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-839'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-839.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-840'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('{\"'||codepoints-to-string((10, 37))||'\":\"x\", \"yyy\":\"y\"}', map{'liberal':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-840.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_type(Res, "item()?") of
                        true -> {comment, "Correct type"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-901'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[-0.123e-2[')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-901.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-902'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[false')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-902.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-903'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[falsehood]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-903.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-904'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[(5)]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-904.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-905'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[{5}]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-905.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-906'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[{x:23}]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-906.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-907'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('23,24')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-907.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-908'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"abc]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-908.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-909'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[1,2,3,]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-909.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-910'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":=13}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-910.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-911'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":13,,\"b\":15}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-911.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-912'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":13')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-912.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-913'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":{\"b\":12}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-913.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-914'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":{\"b\":12}}}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-914.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-915'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-915.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-916'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\1\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-916.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-917'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\u2\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-917.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-918'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\u123u\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-918.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-919'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\b\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-919.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case
            lists:any(
                fun
                    ({comment, _}) -> true;
                    (_) -> false
                end,
                [
                    case xqerl_test:assert_deep_eq(Res, "['�']") of
                        true -> {comment, "Deep equal"};
                        {false, F} -> F
                    end,
                    case xqerl_test:assert_error(Res, "FOJS0001") of
                        true -> {comment, "Correct error"};
                        {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
                        {false, F} -> F
                    end
                ]
            )
        of
            true -> {comment, "any-of"};
            _ -> false
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-920'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\x20\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-920.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-921'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\s\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-921.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-922'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\uD834\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-922.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "['�']") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-923'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\udD1E\"]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-923.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "['�']") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-924'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[\"\\u0000\"]', map{'escape':false()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-924.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "['�']") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-925'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('true', map{'spec':'RFC4627'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-925.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_true(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-926'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('false', map{'spec':'RFC4627'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-926.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_false(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-927'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('null', map{'spec':'RFC4627'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-927.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_empty(Res) of
            true -> {comment, "Empty"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-928'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('93.7', map{'spec':'RFC4627'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-928.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "93.7") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-929'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"abcd\\n\"', map{'spec':'RFC4627','escape':true()})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-929.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_eq(Res, "'abcd\\n'") of
            true -> {comment, "Equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-930'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[.3]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-930.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-931'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[01]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-931.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-932'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[00.00]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-932.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-933'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[+23]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-933.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-934'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('[1.234f0]')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-934.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-935'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json(\"['wrong']\")",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-935.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-936'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"a\":3}', map{'duplicates':'reject'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-936.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0003") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0003 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-937'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"a\":3}', map{'duplicates':'do-your-own-thing'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-937.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0005") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0005 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-938'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"c\":3}', map{'liberal':'liberal'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-938.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "XPTY0004") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: XPTY0004 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-939'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-939.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-940'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2, \"a\":3}', map{'duplicates':'retain'})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-940.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0005") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0005 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-941'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\b\":\"\"}', map{'fallback':lower-case('a')}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-941.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "XPTY0004") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: XPTY0004 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-942'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\b\":\"\"}', map{'fallback':substring#2}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-942.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "XPTY0004") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: XPTY0004 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-943'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry =
        "parse-json('{\"\\b\":\"\"}', map{'fallback':error(QName(\"\",\"USER9999\"), ?)}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-943.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "Q{}USER9999") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: Q{}USER9999 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-944'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\xaa\":\"\"}', map{'fallback':upper-case#1}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-944.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-945'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"\\uFFFF\":\"\"}', map{'fallback':abs#1}) => map:keys()",
    {Env, Opts} = xqerl_test:handle_environment(environment('map', __BaseDir)),
    Qry1 = lists:flatten(Env ++ Qry),
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-945.xq"), Qry1),
            xqerl:run(Mod, Opts)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "XPTY0004") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: XPTY0004 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-946'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\":1, \"b\":2}', map{'duplicates':<a>use-first</a>})",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-946.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_deep_eq(Res, "map{\"a\":1, \"b\":2}") of
            true -> {comment, "Deep equal"};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-947'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\" \"b\"}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-947.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-948'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"a\"')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-948.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-949'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('314eg')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-949.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-950'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('3.14eg')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-950.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-951'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('3.14Eg')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-951.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-952'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('3.14Eg')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-952.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-953'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('{\"'||codepoints-to-string((10, 37))||'\":\"x\", \"yyy\":\"y\"}')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-953.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-954'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"aaa\\\"')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-954.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.

'fn-parse-json-955'(Config) ->
    __BaseDir = ?config(base_dir, Config),
    Qry = "parse-json('\"111\\333\"')",
    Qry1 = Qry,
    io:format("Qry1: ~p~n", [Qry1]),
    Res =
        try
            Mod = xqerl_code_server:compile(filename:join(__BaseDir, "fn-parse-json-955.xq"), Qry1),
            xqerl:run(Mod)
        of
            D -> D
        catch
            _:E -> E
        end,
    Out =
        case xqerl_test:assert_error(Res, "FOJS0001") of
            true -> {comment, "Correct error"};
            {true, F} -> {comment, "WE: FOJS0001 " ++ binary_to_list(F)};
            {false, F} -> F
        end,
    case Out of
        {comment, C} -> {comment, C};
        Err -> ct:fail(Err)
    end.
